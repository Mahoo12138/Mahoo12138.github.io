<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Flutter 入门学习之Tab导航栏 [ Mahoo12138 ]</title><link rel="stylesheet" href="/css/index.css"><meta name="post"><link rel="stylesheet" href="/css/layouts/post.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="hexo-container"><header></header><main id="content"><article id="post"><h1>Flutter 入门学习之Tab导航栏</h1><h2 id="Scaffold"><a href="#Scaffold" class="headerlink" title="Scaffold"></a>Scaffold</h2><p><code>Scaffold</code> 实现了 Material 风格的基本布局结构，它提供了展示<code>drawers</code>(抽屉栏)、<code>snackbars</code>（通知条）和<code>bottomsheets</code>（上滑栏）的功能，基本用法如下：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">Scaffold(</span><br><span class="line">    <span class="comment">//设置AppBar栏 </span></span><br><span class="line">    appBar: AppBar(</span><br><span class="line">        <span class="comment">// 左边的按钮</span></span><br><span class="line">        <span class="comment">//leading: Icon(Icons.menu),</span></span><br><span class="line">        leading: Builder(</span><br><span class="line">          builder: (BuildContext ctx) =&gt; IconButton(</span><br><span class="line">              icon: Icon(Icons.menu),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Open Drawer!&quot;</span>);</span><br><span class="line">                Scaffold.of(ctx).openDrawer();</span><br><span class="line">              &#125;),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 导航栏底部显示 一个类似 Tab 的导航条</span></span><br><span class="line">        bottom: PreferredSize(</span><br><span class="line">          preferredSize: Size.fromHeight(<span class="number">28.0</span>),</span><br><span class="line">          child: Container(</span><br><span class="line">            height: <span class="number">28.0</span>,</span><br><span class="line">            color: Colors.yellow,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// 中间的文字</span></span><br><span class="line">        title: Text(<span class="string">&quot;Flutter Demo&quot;</span>),</span><br><span class="line">        <span class="comment">//右侧的内容，为数组，可设置多个</span></span><br><span class="line">        actions: [</span><br><span class="line">          IconButton(icon: Icon(Icons.search), onPressed: ()&#123;<span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>);&#125;),</span><br><span class="line">          IconButton(icon: Icon(Icons.email), onPressed: <span class="keyword">null</span>),</span><br><span class="line">          IconButton(icon: Icon(Icons.near_me), onPressed: <span class="keyword">null</span>),</span><br><span class="line">        ],</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment">//设置从左和右出现的抽屉栏</span></span><br><span class="line">    drawer: Drawer(),</span><br><span class="line">  	endDrawer: Drawer(),</span><br><span class="line">    <span class="comment">//配置位置</span></span><br><span class="line">    floatingActionButtonLocation: FloatingActionButtonLocation.miniStartFloat,</span><br><span class="line">    <span class="comment">//设置悬浮按钮，默认显示在右下角</span></span><br><span class="line">    floatingActionButton: FloatingActionButton(</span><br><span class="line">    	tooltip: <span class="string">&#x27;FAButton&#x27;</span>,</span><br><span class="line">        foregroundColor: Colors.cyan,</span><br><span class="line">        splashColor: Colors.redAccent,</span><br><span class="line">        backgroundColor: Colors.green,</span><br><span class="line">        child: Icon(Icons.add),</span><br><span class="line">		elevation: <span class="number">10</span>,</span><br><span class="line">        highlightElevation: <span class="number">5</span>,</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment">// 设置背景颜色</span></span><br><span class="line">    backgroundColor: Color.fromRGBO(<span class="number">244</span>, <span class="number">245</span>, <span class="number">245</span>, <span class="number">1.0</span>),</span><br><span class="line">    <span class="comment">// 位于悬浮按钮底端的底栏，可以显示多个部件</span></span><br><span class="line">   persistentFooterButtons: [</span><br><span class="line">        FlatButton(onPressed: ()&#123;&#125;, child: Text(<span class="string">&quot;开启&quot;</span>)),</span><br><span class="line">        Text(<span class="string">&quot;全体起立！&quot;</span>)</span><br><span class="line">      ],</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="圆点指示器"><a href="#圆点指示器" class="headerlink" title="圆点指示器"></a>圆点指示器</h3><p>在 AppBar 的 bottom 内添加 TabPageSelector 圆点指示器，绑定控制器 _tabController：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">appBar: AppBar(</span><br><span class="line">    title: Text(<span class="string">&quot;第一个界面&quot;</span>),</span><br><span class="line">    bottom: PreferredSize(</span><br><span class="line">        preferredSize: Size.fromHeight(<span class="number">28.0</span>),</span><br><span class="line">        child: TabPageSelector(</span><br><span class="line">            controller: _tabController,</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">            selectedColor: Colors.pink,</span><br><span class="line">        ),</span><br><span class="line">    ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p>控制器需要声明及初始化：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_FirstPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">FirstPage</span>&gt; <span class="title">with</span> <span class="title">TickerProviderStateMixin</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    TabController _tabController;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">    <span class="keyword">void</span> initState() &#123;</span><br><span class="line">        _tabController = TabController(length: <span class="number">4</span>, vsync: <span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">super</span>.initState();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 Scaffold 的 body 中，配置 Tab 的几个界面：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">body: TabBarView(</span><br><span class="line">    controller: _tabController,</span><br><span class="line">    children: [</span><br><span class="line">        Center(child: Text(<span class="string">&quot;页面1&quot;</span>),),</span><br><span class="line">        Center(child: Text(<span class="string">&quot;页面2&quot;</span>),),</span><br><span class="line">        Center(child: Text(<span class="string">&quot;页面3&quot;</span>),),</span><br><span class="line">        Center(child: Text(<span class="string">&quot;页面4&quot;</span>),),</span><br><span class="line">    ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<p>当然，常用的做法是使用 TabBar ：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bottom: TabBar(</span><br><span class="line">    controller: _tabController,</span><br><span class="line">    tabs: [</span><br><span class="line">        Tab(text: <span class="string">&quot;标签一&quot;</span>,),</span><br><span class="line">        Tab(text: <span class="string">&quot;标签二&quot;</span>,),</span><br><span class="line">        Tab(text: <span class="string">&quot;标签三&quot;</span>,),</span><br><span class="line">        Tab(text: <span class="string">&quot;标签四&quot;</span>,),</span><br><span class="line">    ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure>



<h2 id="BottomNavigationBar"><a href="#BottomNavigationBar" class="headerlink" title="BottomNavigationBar"></a>BottomNavigationBar</h2><p><code>BottomNavigationBar</code> 和 <code>BottomNavigationBarItem</code>配合<code>Scaffold</code>控件使用可以实现底部导航效果，类似于微信底部的导航效果，以下是一个简单的底部导航栏实例：</p>
<ol>
<li><p>在项目 <strong>Lib</strong> 目录中，新建 <strong>Pages</strong> 包，在其中新建三个界面，分别是<code>home_page.dart</code> ，<code>other_page.dart</code>， <code>profile_page.dart</code> ，当然上文中出现 <code>index_pages.dart</code> 也放在这里，在 <code>index_pages.dart</code> 中引入：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;home_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;other_page.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;profile_page.dart&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>index_pages.dart</code>内的<code>IndexPage</code>（StatefulWidget）类中 <strong>BottomNavigationBarItem</strong> 列表，定义界面列表以及当前显示界面的<strong>索引</strong>：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="built_in">List</span>&lt;BottomNavigationBarItem&gt; bottomTabs = [</span><br><span class="line">    BottomNavigationBarItem(</span><br><span class="line">        <span class="comment">//未选中图标</span></span><br><span class="line">        icon: Icon(CupertinoIcons.home),</span><br><span class="line">        <span class="comment">//选中时控件</span></span><br><span class="line">        activeIcon: Icon(CupertinoIcons.scope),</span><br><span class="line">        <span class="comment">//选中时导航栏背景颜色</span></span><br><span class="line">        backgroundColor: Colors.redAccent,</span><br><span class="line">        <span class="comment">//显示的文字</span></span><br><span class="line">        label: <span class="string">&quot;主页&quot;</span></span><br><span class="line">    ),</span><br><span class="line">    BottomNavigationBarItem(</span><br><span class="line">        icon: Icon(CupertinoIcons.cart),</span><br><span class="line">        backgroundColor: Colors.deepPurpleAccent,</span><br><span class="line">        label: <span class="string">&quot;其他&quot;</span></span><br><span class="line">    ),</span><br><span class="line">    BottomNavigationBarItem(</span><br><span class="line">        icon: Icon(CupertinoIcons.profile_circled),</span><br><span class="line">        backgroundColor: Colors.amber,</span><br><span class="line">        label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">    ),</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">List</span> tabBodies = [</span><br><span class="line">    HomePage(),</span><br><span class="line">    OtherPage(),</span><br><span class="line">    ProfilePage()</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> currentIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> currentPage;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>IndexPage</code>类的状态类 <code>_IndexPageState</code> (extends State&lt;IndexPage&gt;) 中重写<code>build</code>方法：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      title: Text(<span class="string">&quot;Flutter Demo&quot;</span>),</span><br><span class="line">    ),</span><br><span class="line">    backgroundColor: Color.fromRGBO(<span class="number">244</span>, <span class="number">245</span>, <span class="number">245</span>, <span class="number">1.0</span>),</span><br><span class="line">    bottomNavigationBar: BottomNavigationBar(</span><br><span class="line">      <span class="comment">//底栏切换的样式</span></span><br><span class="line">      type: BottomNavigationBarType.fixed,</span><br><span class="line">      <span class="comment">//当前的序列</span></span><br><span class="line">      currentIndex: currentIndex,</span><br><span class="line">      <span class="comment">//颜色设置</span></span><br><span class="line">      selectedItemColor: Theme.of(context).primaryColor,</span><br><span class="line">  	unselectedItemColor: Colors.grey,</span><br><span class="line"><span class="comment">//底栏子项的列表</span></span><br><span class="line">      items: bottomTabs,</span><br><span class="line">      <span class="comment">//每个子项点击触发的方法</span></span><br><span class="line">      onTap: (index)&#123;</span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="comment">//方法触发后，必须调用setState()方法重新绘制UI</span></span><br><span class="line">          currentIndex = index;</span><br><span class="line">          <span class="comment">//将点击的子项的索引作为当前显示的索引，并切换索引对应的视图界面</span></span><br><span class="line">          currentPage = tabBodies[currentIndex];</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">    <span class="comment">//显示的界面</span></span><br><span class="line">    body: currentPage,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关于 BottomNavigationBarItem 切换的显示模式，默认 3-5 个时采用<code>fixed</code>模式，4 个时默认采用<code>shifting</code>模式，当然，是可以指定的。</p>
</li>
</ol>
</article><div id="paginator"></div></main><footer><div class="icon-wrapper in-left"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></button></div><div class="icon-wrapper in-right"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></span></button></div><p class="copyright-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer">CC BY-NC-SA 4.0</a><span>·</span><a href="https://github.com/ttttonyhe/ouorz-mono" target="_blank" rel="noreferrer">Open Source Software (OSS)</a></p></footer><script src="/js/ouo.js"></script></div></body></html>