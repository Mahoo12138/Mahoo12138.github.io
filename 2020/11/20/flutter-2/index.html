<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Flutter 入门学习之配置路由 [ Mahoo12138 ]</title><link rel="stylesheet" href="/css/index.css"><meta name="post"><link rel="stylesheet" href="/css/layouts/post.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="hexo-container"><header></header><main id="content"><article id="post"><h1>Flutter 入门学习之配置路由</h1><h2 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h2><h3 id="404路由的配置"><a href="#404路由的配置" class="headerlink" title="404路由的配置"></a>404路由的配置</h3><p>话不多说，直接贴代码：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App 主界面</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      routes: &#123;</span><br><span class="line">         <span class="comment">// 配置初始界面的第一种方式</span></span><br><span class="line">         <span class="comment">// &#x27;/&#x27;: (BuildContext context) =&gt; MyHomePage(title: &#x27;Flutter Demo Home Page&#x27;),</span></span><br><span class="line">        <span class="string">&#x27;/home&#x27;</span>: (BuildContext context) =&gt; MyHomePage(title: <span class="string">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;/1&#x27;</span>: (BuildContext context) =&gt; FirstPage(),</span><br><span class="line">      &#125;,         </span><br><span class="line">      <span class="comment">// 配置初始界面的第一种方式</span></span><br><span class="line">      <span class="comment">// home: MyHomePage(title: &#x27;Flutter Demo Home Page&#x27;),</span></span><br><span class="line">      <span class="comment">// 第三种方式</span></span><br><span class="line">      initialRoute: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="comment">// 配置错误路由（路由表中没有的）</span></span><br><span class="line">      onGenerateRoute: (RouteSettings settings)&#123;</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (BuildContext context) =&gt; ErrorPage());</span><br><span class="line">      &#125;,</span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 MyHomePage 内添加几个按钮：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">children: &lt;Widget&gt;[</span><br><span class="line">    Text(</span><br><span class="line">        <span class="string">&#x27;路由测试&#x27;</span>,</span><br><span class="line">    ),</span><br><span class="line">    RaisedButton(</span><br><span class="line">        child: Text(<span class="string">&#x27;打开首界面&#x27;</span>),</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">            Navigator.of(context).pushNamed(<span class="string">&#x27;/1&#x27;</span>);</span><br><span class="line">        &#125;),</span><br><span class="line">    RaisedButton(</span><br><span class="line">        child: Text(<span class="string">&#x27;不存在界面&#x27;</span>),</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">            Navigator.of(context).pushNamed(<span class="string">&#x27;/2&#x27;</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h3 id="路由观察者的配置"><a href="#路由观察者的配置" class="headerlink" title="路由观察者的配置"></a>路由观察者的配置</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App 主界面</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      onGenerateRoute: (RouteSettings settings)&#123;</span><br><span class="line">        <span class="keyword">return</span> MaterialPageRoute(builder: (BuildContext context) =&gt; ErrorPage());</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 配置路由观察者</span></span><br><span class="line">      navigatorObservers: [</span><br><span class="line">        MyNavigatorObserver(),</span><br><span class="line">      ],</span><br><span class="line">       </span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建文件 <code>my_navigator_observer.dart</code>，观察者类需要继承自 <code>NavigatorObserver</code>，根据需求重写几个方式：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNavigatorObserver</span> <span class="keyword">extends</span> <span class="title">NavigatorObserver</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didPush(Route route, Route previousRoute) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Push Route:&quot;</span> + route.settings.toString());</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Push Route:&quot;</span> + route.settings.name.toString());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(previousRoute!=<span class="keyword">null</span>)&#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Push PreRoute:&quot;</span> + previousRoute.settings.toString());</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;Push PreRoute:&quot;</span> + previousRoute.settings.name.toString());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">super</span>.didPush(route, previousRoute);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> didPop(Route route, Route previousRoute) &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement didPop</span></span><br><span class="line">    <span class="keyword">super</span>.didPop(route, previousRoute);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在每次执行了 Push 方法时都会回调 didPush() 等方法。 </p>
</article><div id="paginator"></div></main><footer><div class="icon-wrapper in-left"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></button></div><div class="icon-wrapper in-right"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></span></button></div><p class="copyright-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer">CC BY-NC-SA 4.0</a><span>·</span><a href="https://github.com/ttttonyhe/ouorz-mono" target="_blank" rel="noreferrer">Open Source Software (OSS)</a></p></footer><script src="/js/ouo.js"></script></div></body></html>