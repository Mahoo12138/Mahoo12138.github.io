<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>利用Cloud Studio为博客搭建免费图床 [ Mahoo12138 ]</title><link rel="stylesheet" href="/css/index.css"><meta name="post"><link rel="stylesheet" href="/css/layouts/post.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="hexo-container"><header></header><main id="content"><article id="post"><h1>利用Cloud Studio为博客搭建免费图床</h1><p>Cloud Studio 已更新，教程失效</p>
<p>搭建的静态博客利用Markdown码字，必然少不了图片，所以需要另外的图床作为辅助，网上有很多优秀的图床程序，不过大多都功能复杂，而且图片放在别人那，让我总感觉不是很放心（万一哪天就跑路了呢？），而自己来搭建图床程序的话，需要自备服务器或者是虚拟主机，这个可是要付费的，毕竟自己的博客都是利用免费的Pages服务搭建的，而再为了托管图片去付费就有些得不偿失了，所以我想了半天，折腾了半天，可以利用腾讯云旗下的Cloud Studio的WebIDE及代码托管平台来搭建图床，步骤如下：</p>
<h2 id="使用Git创建本地存储库"><a href="#使用Git创建本地存储库" class="headerlink" title="使用Git创建本地存储库"></a>使用Git创建本地存储库</h2><p>搭建的图床是利用Git及远程存储库的模式进行传输和存储的，我主要是在Windows平台上使用，而Win10是没有预装Git的，所以首先需要安装<a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a>；</p>
<ul>
<li><p>在你想要存储图片的路径，创建一个文件夹，例如我的<code>D:\Mahoo\Pictures\Blog</code>;</p>
</li>
<li><p>创建本地存储库（以<code>Blog</code>目录为例）</p>
<p>在<code>Blog</code>目录下，右击选择<code>Git Bash</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure></li>
</ul>
<p>在此文件夹内，可创建多个文件夹存储你的不同图片。</p>
<h2 id="使用Cloud-Studio创建远程存储库"><a href="#使用Cloud-Studio创建远程存储库" class="headerlink" title="使用Cloud Studio创建远程存储库"></a>使用Cloud Studio创建远程存储库</h2><ul>
<li><p>创建账号</p>
<p>腾讯云开发者平台：<a target="_blank" rel="noopener" href="https://dev.tencent.com/"> https://dev.tencent.com/ </a></p>
</li>
<li><p>新建一个项目</p>
<p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn/hexo-images/Tutorials/pic_cs/new.png" alt="新建项目"></p>
<p>项目名称，地址自定义，是否公开勾选。</p>
<p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn/hexo-images/Tutorials/pic_cs/new1.png" alt="新建项目"></p>
</li>
</ul>
<p>进入新建项目界面，打开右侧<code>代码 -&gt;代码浏览 </code>，复制该项目的HTTPS地址。</p>
<p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn/hexo-images/Tutorials/pic_cs/new2.png" alt="项目界面"></p>
<h2 id="连接本地存储库和远程存储库"><a href="#连接本地存储库和远程存储库" class="headerlink" title="连接本地存储库和远程存储库"></a>连接本地存储库和远程存储库</h2><p>当你往本地存储库添加图片后，使用指令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;自定义内容&quot;</span><br><span class="line">git remote add origin 刚才复制的的HTTPS地址</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p>这样的话，图片已经同步到远程存储库了，当然你对<code>git</code>相当熟悉的话，以上全是废话，此教程仅针对刚搭建博客的小白。</p>
<h2 id="开启Pages服务绑定域名"><a href="#开启Pages服务绑定域名" class="headerlink" title="开启Pages服务绑定域名"></a>开启Pages服务绑定域名</h2><p>打开此界面，按提示绑定域名即可</p>
<p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn/hexo-images/Tutorials/pic_cs/pages.png"></p>
<h2 id="通过直链引用图片"><a href="#通过直链引用图片" class="headerlink" title="通过直链引用图片"></a>通过直链引用图片</h2><p>这里我举例来说明比较好懂，在写博客的过程中，当你引入一张图片时，例如是这样的：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D:\Mahoo\Pictures\Blog\test.png</span><br></pre></td></tr></table></figure>

<p>这时该图片的本地地址，在已经开启Pages服务并且绑定域名的情况下，你绑定的域名直接指向了git本地存储库的根目录，也就是<code>Blog</code>，所以则可以将本地地址改成网络直链：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://你的域名/test.png</span><br></pre></td></tr></table></figure>

<p>你可以通过文本编辑器的替换功能，也可以用代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;D:/Mahoo/BLog/source/_posts/Cloud_studio.md&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">string = f.read()</span><br><span class="line">f.close()</span><br><span class="line">key = <span class="string">r&#x27;D:\\Mahoo\\Pictures\\Blog\\hexo_images\\Tutorials\\pic_cs\\&#x27;</span></span><br><span class="line">new = <span class="string">&#x27;https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn/hexo-images/Tutorials/pic_cs/&#x27;</span></span><br><span class="line"><span class="comment"># result = re.compile(key).findall(string)</span></span><br><span class="line"><span class="comment"># print(result)</span></span><br><span class="line">string = re.sub(key, new, string)</span><br><span class="line"><span class="comment"># print(string)</span></span><br><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;D:/Mahoo/BLog/source/_posts/Cloud_studio.md&#x27;</span>, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">f.write(string)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>

<p>一个文件的链接替换当然是编辑器的替换方便的多，但如果需要替换域名，对所有博客文章进行替换时，文本编辑器就显得有些力不从心了，这里也贴出来我的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> files <span class="keyword">in</span> os.walk(<span class="string">&#x27;D:/Mahoo/BLog/source/_posts/&#x27;</span>):</span><br><span class="line">    <span class="built_in">print</span>(files[<span class="number">2</span>][<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(files[<span class="number">2</span>])):</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;D:/Mahoo/BLog/source/_posts/&#x27;</span> + files[<span class="number">2</span>][i], <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    string = f.read()</span><br><span class="line">    f.close()</span><br><span class="line">    key = <span class="string">&#x27;http://airlife.club/&#x27;</span>		<span class="comment">#旧域名</span></span><br><span class="line">    new = <span class="string">&#x27;https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn/hexo-images/&#x27;</span>		<span class="comment">#新域名</span></span><br><span class="line">    string = re.sub(key, new, string)</span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&#x27;D:/Mahoo/BLog/source/_posts/&#x27;</span> + files[<span class="number">2</span>][i], <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    f.write(string)</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure>



</article><div id="paginator"></div></main><footer><div class="icon-wrapper in-left"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></button></div><div class="icon-wrapper in-right"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></span></button></div><p class="copyright-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer">CC BY-NC-SA 4.0</a><span>·</span><a href="https://github.com/ttttonyhe/ouorz-mono" target="_blank" rel="noreferrer">Open Source Software (OSS)</a></p></footer><script src="/js/ouo.js"></script></div></body></html>