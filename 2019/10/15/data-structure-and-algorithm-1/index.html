<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>数据结构与算法学习之复杂度 [ Mahoo12138 ]</title><link rel="stylesheet" href="/css/index.css"><meta name="post"><link rel="stylesheet" href="/css/layouts/post.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="hexo-container"><header></header><main id="content"><article id="post"><h1>数据结构与算法学习之复杂度</h1><h2 id="什么是算法"><a href="#什么是算法" class="headerlink" title="什么是算法"></a>什么是算法</h2><p>算法就是用于解决特定问题的一系列的执行步骤，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 计算 a + b 的值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">plus</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 计算 1 ~ n 和的值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;i&lt;=n;i++) &#123;</span><br><span class="line">        result += i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用不同的算法，解决同一个问题，效率可能相差非常大，比如求解第 n 个斐波那契数（Fibonacci number），这里先埋一个伏笔，具体我们后面再说。</p>
<h2 id="如何评判一个算法的好坏"><a href="#如何评判一个算法的好坏" class="headerlink" title="如何评判一个算法的好坏"></a>如何评判一个算法的好坏</h2><p>如果单从执行的效率上进行评估，可能会想到这么一种方案，比较不同算法对同一组输入的处理执行时间，当然这样的方案也叫做：<strong>事后统计法</strong>。</p>
<p>这样的方案有比较明显的缺点，执行的时间严重依赖运行时各种不确定的环境因素，必须编写相应的测算代码，而且测试的数据的选择也比较难以保证公平性。</p>
<p>一般从以下几个维度来评估算法的优劣：</p>
<ul>
<li><p>正确性，可读性，健壮性（对不合理输入的反应能力和处理能力）；</p>
</li>
<li><p><strong>时间复杂度</strong>（time complexity）：估算赋值语句的执行次数（执行时间）；</p>
<blockquote>
<p>一条赋值语句同时包含了（表达式）计算和（变量） 存储两个基本资源。</p>
</blockquote>
</li>
<li><p><strong>空间复杂度</strong>（space complexity）：估算所需占用的存储空间；</p>
</li>
</ul>
<h2 id="大O表示法"><a href="#大O表示法" class="headerlink" title="大O表示法"></a>大O表示法</h2><p>一般用大O表示法来描述复杂度，它表示的是数据规模 n 所对应的复杂度，在描述时会忽略常数，和n 的系数，以及 n 的低阶，例如：</p>
<ul>
<li>9     &gt;&gt;	O(1)</li>
<li>2n + 3      &gt;&gt;      O(n)</li>
<li>n<sup>2</sup> + 2n + 6     &gt;&gt;     O(n<sup>2</sup>)</li>
<li>4n<sup>3</sup> + 3n<sup>2</sup> + 22n + 100    &gt;&gt;    O(n<sup>3</sup>)</li>
</ul>
<p>需要注意，大O表示法仅仅只是一种粗略的分析模型，是一种估算，能帮助我们短时间内了解一个算法的执行效率。</p>
<h3 id="对数阶的细节"><a href="#对数阶的细节" class="headerlink" title="对数阶的细节"></a>对数阶的细节</h3><p>对于对数阶，一般会忽略底数，因为<br>$$<br>log_{2}{n} &#x3D; log_{2}{9} \times log_{9}{n}<br>$$<br>所以 $log_{2}{n}$，$log_{2}{9}$ 统称 $log{n}$ 。</p>
<h3 id="小练习"><a href="#小练习" class="headerlink" title="小练习"></a>小练习</h3><p>无论传入的 n 的值为多大，下列代码都只执行 1 + 1 + 4 + 4 + 4 &#x3D; 14 个运算步骤（暂且忽略判断语句），所以时间复杂度为 O(1)，其余的以此类推。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// 1</span></span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">10</span>) &#123; </span><br><span class="line">        System.out.println(<span class="string">&quot;n &gt; 10&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (n &gt; <span class="number">5</span>) &#123; </span><br><span class="line">        System.out.println(<span class="string">&quot;n &gt; 5&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;n &lt;= 5&quot;</span>); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 + 4 + 4 + 4</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// O(1)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// 1 + 3n  &gt;&gt;  O(n)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test3</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// 1 + 2n + n * (1 + 3n)</span></span><br><span class="line">    <span class="comment">// 3n^2 + 3n + 1  &gt;&gt;  O(n^2)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下代码，while 循环在 (n &#x3D; n &#x2F; 2) &gt; 0 不满足时停止循环，也就是看 n 能被 2 整除几次，联系到数学的运算就是 log，这样说不能很好的理解，举个例子，当传入 n &#x3D; 8 时，8&#x2F;2 &#x3D; 4，4&#x2F;2 &#x3D; 2，2&#x2F;2 &#x3D; 1，1&#x2F;2 &#x3D; 0，到第四次就不满足停止循环，也就是循环 3 次，即 8 &#x3D; 2<sup>3</sup>  &gt;&gt;  3 &#x3D; log2(8)；同理，test6 中 n&#x2F;5 和 test7 中 i &#x3D; i * 2，也是类似的处理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test5</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// 执行次数 = log2(n)  &gt;&gt;  O(logn)</span></span><br><span class="line">    <span class="keyword">while</span> ((n = n / <span class="number">2</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test6</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// log5(n)  &gt;&gt;  O(logn)</span></span><br><span class="line">    <span class="keyword">while</span> ((n = n / <span class="number">5</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test7</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="comment">// 1 + 2*log2(n) + log2(n) * (1 + 3n)</span></span><br><span class="line">    <span class="comment">// 1 + 3*log2(n) + 2 * nlog2(n)  &gt;&gt;  O(nlogn)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i = i * <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="comment">// 1 + 3n</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="常见的复杂度"><a href="#常见的复杂度" class="headerlink" title="常见的复杂度"></a>常见的复杂度</h2><table>
<thead>
<tr>
<th>执行次数</th>
<th>复杂度</th>
<th>非正式用语</th>
</tr>
</thead>
<tbody><tr>
<td>12</td>
<td>O(1)</td>
<td>常数阶</td>
</tr>
<tr>
<td>2n + 3</td>
<td>O(n)</td>
<td>线性阶</td>
</tr>
<tr>
<td>4n<sup>2</sup> + 2n + 6</td>
<td>O(n<sup>2</sup>)</td>
<td>平方阶</td>
</tr>
<tr>
<td>4log<del>2</del>n +25</td>
<td>O(logn)</td>
<td>对数阶</td>
</tr>
<tr>
<td>3n + 2nlog<del>3</del>n + 15</td>
<td>O(nlogn)</td>
<td>nlogn 阶</td>
</tr>
<tr>
<td>4n<sup>3</sup> + 3n<sup>2</sup> +22n + 100</td>
<td>O(n<sup>3</sup>)</td>
<td>立方阶</td>
</tr>
<tr>
<td>2<sup>n</sup></td>
<td>O(2<sup>n</sup>)</td>
<td>指数阶</td>
</tr>
</tbody></table>
<p>复杂度大小：O(1)  &lt;  O(logn)  &lt;   O(n)  &lt;  O(nlogn)   &lt;   O(n<sup>2</sup>)   &lt;   O(n<sup>3</sup>)   &lt;   O(2<sup>n</sup>)   &lt;   O(n!)   &lt;   O(n<sup>n</sup>)</p>
<p>可以把复杂度当作函数，利用工具形象对比复杂度的大小：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh.numberempire.com/graphingcalculator.php">https://zh.numberempire.com/graphingcalculator.php</a></li>
</ul>
<h3 id="数据规模较小时"><a href="#数据规模较小时" class="headerlink" title="数据规模较小时"></a>数据规模较小时</h3><p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn//hexo-images/study/algorithm/20210418160156.png"></p>
<h3 id="数据规模较大时"><a href="#数据规模较大时" class="headerlink" title="数据规模较大时"></a>数据规模较大时</h3><p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn//hexo-images/study/algorithm/20210418160204.png"></p>
<h2 id="斐波那契函数算法分析"><a href="#斐波那契函数算法分析" class="headerlink" title="斐波那契函数算法分析"></a>斐波那契函数算法分析</h2><p>对于斐波那契函数，即返回斐波那契数列的第 n 位这样的一个函数的写法一般有两种：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fib1</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    <span class="keyword">return</span> fib1(n - <span class="number">1</span>) + fib1(n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fib2</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    <span class="type">int</span> <span class="variable">first</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">second</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">        second += first;</span><br><span class="line">        first = second - first;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> second;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>仅从代码量来看，是 fib1 完胜，但我们抛开表面深挖底层可以发现事情远不止这么简单，我们可以先用代码分别测算它们的执行时间来看个大概：</p>
<blockquote>
<p>【fib1(10)】耗时：0.0秒			   【fib2(10)】耗时：0.0秒</p>
<p>【fib1(45)】耗时：10.374秒		【fib2(45)】耗时：0.0秒</p>
</blockquote>
<p>当数据规模较小时，时间差并不是很大，数据规模大到一定程度，两者之间的区别就出来了，我们可用大O表示法来粗略确定他们的时间复杂度，就明白这么回事了。</p>
<p><img src="https://cdn.jsdelivr.net/gh/mahoo12138/js-css-cdn//hexo-images/study/algorithm/20210418160209.png"></p>
<p>因为 fib1() 函数内的 <code>return </code>语句可看作函数的核心，即时间复杂度可由<strong>调用该函数的次数</strong>来确定。</p>
<p>由图可知，1 + 2 + 4 + 8 &#x3D; 2^0^ + 2^1^ + 2<sup>2</sup> + 2<sup>3</sup> &#x3D; 2^4^− 1 &#x3D; 2^n−1^− 1 &#x3D; 0.5 ∗ 2<sup>n</sup>− 1，所以时间复杂度是 O(2<sup>n</sup>)。</p>
<p>而 fib2() 的时间复杂度很容易确定为 O(n)，它们的区别有多大呢？</p>
<p>如果有一台1GHz的普通计算机，运算速度10<sup>9</sup>次&#x2F;秒（n为64），O(n)大约耗时6.4 ∗ 10<sup>-8</sup>秒，O(2<sup>n</sup>)大约耗时584.94年。有时候算法之间的差距，往往比硬件方面的差距还要大。</p>
</article><div id="paginator"></div></main><footer><div class="icon-wrapper in-left"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></button></div><div class="icon-wrapper in-right"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></span></button></div><p class="copyright-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer">CC BY-NC-SA 4.0</a><span>·</span><a href="https://github.com/ttttonyhe/ouorz-mono" target="_blank" rel="noreferrer">Open Source Software (OSS)</a></p></footer><script src="/js/ouo.js"></script></div></body></html>