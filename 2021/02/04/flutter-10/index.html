<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>Flutter 入门学习之进度条 [ Mahoo12138 ]</title><link rel="stylesheet" href="/css/index.css"><meta name="post"><link rel="stylesheet" href="/css/layouts/post.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="hexo-container"><header></header><main id="content"><article id="post"><h1>Flutter 入门学习之进度条</h1><h2 id="LinearProgressIndicator"><a href="#LinearProgressIndicator" class="headerlink" title="LinearProgressIndicator"></a>LinearProgressIndicator</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">LinearProgressIndicator(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="built_in">double</span> value,</span><br><span class="line">    Color backgroundColor,</span><br><span class="line">    Animation&lt;Color&gt; valueColor,</span><br><span class="line">    <span class="keyword">this</span>.minHeight,</span><br><span class="line">    <span class="built_in">String</span> semanticsLabel,</span><br><span class="line">    <span class="built_in">String</span> semanticsValue,</span><br><span class="line">&#125;) </span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>value</code>：表示当前的进度，取值范围为[0,1]；如果<code>value</code>为<code>null</code>时则指示器会执行一个循环动画（模糊进度）；当<code>value</code>不为<code>null</code>时，指示器为一个具体进度的进度条；</p>
</li>
<li><p><code>backgroundColor</code>：设置背景颜色；</p>
</li>
<li><p><code>valueColor</code>：指示器的进度条颜色；值得注意的是，该值类型是<code>Animation&lt;Color&gt;</code>，这允许我们对进度条的颜色也可以指定动画。如果不需要动画，也就是使用一种固定的颜色，此时我们可以通过<code>AlwaysStoppedAnimation</code>来指定。</p>
</li>
</ul>
<h2 id="CircularProgressIndicator"><a href="#CircularProgressIndicator" class="headerlink" title="CircularProgressIndicator"></a>CircularProgressIndicator</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CircularProgressIndicator(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="built_in">double</span> value,</span><br><span class="line">    Color backgroundColor,</span><br><span class="line">    Animation&lt;Color&gt; valueColor,</span><br><span class="line">    <span class="keyword">this</span>.strokeWidth = <span class="number">4.0</span>,</span><br><span class="line">    <span class="built_in">String</span> semanticsLabel,</span><br><span class="line">    <span class="built_in">String</span> semanticsValue,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>strokeWidth</code> 表示圆形进度条的粗细；</li>
</ul>
<p>使用大体上和<code>LinearProgressIndicator</code>一致。</p>
<h2 id="进度条动画"><a href="#进度条动画" class="headerlink" title="进度条动画"></a>进度条动画</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">LinearProgressIndicator(</span><br><span class="line">    backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">    valueColor: ColorTween(begin: Colors.grey, end: Colors.blue)</span><br><span class="line">    .animate(_animationController), <span class="comment">// 从灰色变成蓝色</span></span><br><span class="line">    value: _animationController.value,</span><br><span class="line">),</span><br></pre></td></tr></table></figure>

<h2 id="案例实践"><a href="#案例实践" class="headerlink" title="案例实践"></a>案例实践</h2><h3 id="Visibility"><a href="#Visibility" class="headerlink" title="Visibility"></a>Visibility</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Visibility(&#123;</span><br><span class="line">    Key key,</span><br><span class="line">    <span class="meta">@required</span> <span class="keyword">this</span>.child,</span><br><span class="line">    <span class="keyword">this</span>.replacement = <span class="keyword">const</span> SizedBox.shrink(),<span class="comment">//不可见时显示的组件（当maintainState=false）</span></span><br><span class="line">    <span class="keyword">this</span>.visible = <span class="keyword">true</span>,<span class="comment">//子组件是否可见，默认true（可见）</span></span><br><span class="line">    <span class="keyword">this</span>.maintainState = <span class="keyword">false</span>,<span class="comment">//不可见时是否维持状态，默认为false</span></span><br><span class="line">    <span class="keyword">this</span>.maintainAnimation = <span class="keyword">false</span>,<span class="comment">//不可见时，是否维持子组件中的动画</span></span><br><span class="line">    <span class="keyword">this</span>.maintainSize = <span class="keyword">false</span>,<span class="comment">//不可见时是否留有空间</span></span><br><span class="line">    <span class="keyword">this</span>.maintainSemantics = <span class="keyword">false</span>,<span class="comment">//不可见时是否维持它的语义</span></span><br><span class="line">    <span class="keyword">this</span>.maintainInteractivity = <span class="keyword">false</span>,<span class="comment">//不可见时是否具有交互性</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>Visibility 使用简单，不做过多介绍，值得注意的一点就是除了[<code>visible</code>]参数外，其他的参数不宜做动态的更改，否则会引起子组件的子树重建，导致其中的状态丢失。</p>
<p>简单的实践一个耗时任务的进度条的显示与隐藏：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认不显示进度条</span></span><br><span class="line"><span class="built_in">bool</span> _isDelay = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">Column(</span><br><span class="line">    children: [</span><br><span class="line">        RaisedButton(</span><br><span class="line">            <span class="comment">// 按钮点击后改变状态</span></span><br><span class="line">            onPressed: _delay,</span><br><span class="line">            color: Colors.deepPurpleAccent,</span><br><span class="line">            child: Text(<span class="string">&quot;发起耗时任务&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        Visibility(</span><br><span class="line">            visible: !_isDelay,</span><br><span class="line">            child: Text(<span class="string">&quot;当前未发起耗时任务&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        Visibility(</span><br><span class="line">            visible: _isDelay,</span><br><span class="line">            child: LinearProgressIndicator(</span><br><span class="line">                backgroundColor: Colors.grey[<span class="number">200</span>],</span><br><span class="line">                valueColor: AlwaysStoppedAnimation(Colors.blue),</span><br><span class="line">            ),</span><br><span class="line">        )  </span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">_delay() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">// 显示进度条</span></span><br><span class="line">    _isDelay = ! _isDelay;</span><br><span class="line">    Future.delayed(<span class="built_in">Duration</span>(seconds: <span class="number">3</span>), () &#123;</span><br><span class="line">        <span class="comment">// 3s 后隐藏进度条</span></span><br><span class="line">        _isDelay = ! _isDelay;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</article><div id="paginator"></div></main><footer><div class="icon-wrapper in-left"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></button></div><div class="icon-wrapper in-right"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></span></button></div><p class="copyright-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer">CC BY-NC-SA 4.0</a><span>·</span><a href="https://github.com/ttttonyhe/ouorz-mono" target="_blank" rel="noreferrer">Open Source Software (OSS)</a></p></footer><script src="/js/ouo.js"></script></div></body></html>