<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>关于WSL Ubuntu 20.04使用VScode连接报错的解决方法 [ Mahoo12138 ]</title><link rel="stylesheet" href="/css/index.css"><meta name="post"><link rel="stylesheet" href="/css/layouts/post.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="hexo-container"><header></header><main id="content"><article id="post"><h1>关于WSL Ubuntu 20.04使用VScode连接报错的解决方法</h1><p>在子系统安装完成并配置好 ssh 后，使用 Vscode Remote 连接安装 Vscode Server 时报错，报错信息如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; tar --version:</span><br><span class="line">[08:48:37.512] &gt; tar (GNU tar) 1.34</span><br><span class="line">&gt; Copyright (C) 2021 Free Software Foundation, Inc.</span><br><span class="line">&gt; License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;. </span><br><span class="line">&gt; This is free software: you are free to change and redistribute it.</span><br><span class="line">&gt; There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line">&gt; </span><br><span class="line">&gt; Written by John Gilmore and Jay Fenlason.</span><br><span class="line">[08:48:37.539] &gt; /usr/bin/gzip: 1: ELF: not found</span><br><span class="line">&gt; /usr/bin/gzip: 3: : not found</span><br><span class="line">&gt; /usr/bin/gzip: 4: Syntax error: <span class="string">&quot;(&quot;</span> unexpected</span><br><span class="line">&gt; tar: Child returned status 2</span><br><span class="line">&gt; tar: Error is not recoverable: exiting now</span><br><span class="line">[08:48:37.547] &gt; </span><br><span class="line">[08:48:37.604] &gt; ERROR: tar exited with non-0 <span class="built_in">exit</span> code: 0</span><br><span class="line">&gt; Already attempted <span class="built_in">local</span> download, failing</span><br></pre></td></tr></table></figure>

<p>报错信息很直观，大概率是因为 vscode-server.tar.gz 下载后通过<code>gzip</code>解压失败导致的，初步怀疑是网络原因，进行了多次下载且搜索了<a target="_blank" rel="noopener" href="https://github.com/microsoft/WSL/issues/4461">microsoft&#x2F;WSL · Issue #4461  </a>后排除了网络原因，并确定是当前版本安装的 gzip 的问题：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gzip</span><br><span class="line">-bash: /usr/bin/gzip: cannot execute binary file: Exec format error</span><br><span class="line">$ apt list gzip</span><br><span class="line">Listing... Done</span><br><span class="line">gzip/jammy,now 1.10-4ubuntu4 amd64 [installed]</span><br></pre></td></tr></table></figure>

<p>索性开源社区已经给出了解决方案，安装一个旧版本的 <a target="_blank" rel="noopener" href="https://launchpad.net/ubuntu/disco/amd64/gzip/1.9-3">gzip-1.9-3</a>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://launchpadlibrarian.net/406169458/gzip_1.9-3_amd64.deb</span><br><span class="line">$ <span class="built_in">sudo</span> dpkg -i ./gzip_1.9-3_amd64.deb</span><br><span class="line">$ <span class="built_in">sudo</span> apt-mark hold gzip	<span class="comment"># 取消更新</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt-mark unhold gzip <span class="comment"># 恢复更新</span></span><br></pre></td></tr></table></figure>



</article><div id="paginator"></div></main><footer><div class="icon-wrapper in-left"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></span></button></div><div class="icon-wrapper in-right"><button class="icon-button" aria-label="change theme"><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" height="100%" width="100%"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></span></button></div><p class="copyright-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noreferrer">CC BY-NC-SA 4.0</a><span>·</span><a href="https://github.com/ttttonyhe/ouorz-mono" target="_blank" rel="noreferrer">Open Source Software (OSS)</a></p></footer><script src="/js/ouo.js"></script></div></body></html>